(this.webpackJsonpunspash=this.webpackJsonpunspash||[]).push([[0],{37:function(e,t,a){e.exports=a(73)},42:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),s=a.n(c),o=(a(42),a(3)),i=a(4),u=a(7),l=a(6),m=a(8),h=a(18),p=a.n(h),g=a(20),b=a(13);function f(e,t){return function(a){function n(e){var a;return Object(o.a)(this,n),(a=Object(u.a)(this,Object(l.a)(n).call(this,e))).populate=function(){console.log("Scrolling"),document.documentElement.getBoundingClientRect().bottom<document.documentElement.clientHeight+1&&(a.setState({fething:!0}),a.nextImages())},a.nextImages=function(){a.state.hasMore&&(console.log("New images incoming"),a.setState((function(e){var t=Object.assign(e);return t.currentPage++,t}),(function(){a.getData(a.state.currentPage,Object(b.a)(a),a.props.match.params.queryString)})))},a.getData=t,a.populate=a.populate.bind(Object(b.a)(a)),a.state={images:[],currentPage:1,hasMore:!0},a}return Object(m.a)(n,a),Object(i.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.match.params.queryString!==this.props.match.params.queryString&&(this.setImages([]),console.log("Fetching images"),this.getData(this.state.currentPage,this,this.props.match.params.queryString))}},{key:"setImages",value:function(e){this.setState({images:e})}},{key:"componentDidMount",value:function(){this.getData(this.state.currentPage,this,this.props.match.params.queryString),window.addEventListener("scroll",this.populate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.populate)}},{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{images:this.state.images}))}}]),n}(r.a.Component)}var d=a(22),v=a.n(d),j=a(17);v.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log("Logging the error",e),j.b.error("Something went wrong")),Promise.reject(e)}));var O=function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.a.get(e,{headers:t})}}]),e}(),k=function(e){return(new O).get("https://api.unsplash.com/photos?page=".concat(e),{Authorization:"Client-ID ".concat("1daed900b99463debb658164eea9672dc7f95f9939b97a745a479ddbe5592be8")})},E=function(e,t){return(new O).get("https://api.unsplash.com/search/photos?page=".concat(t,"&query=").concat(e.toLowerCase()),{Authorization:"Client-ID ".concat("1daed900b99463debb658164eea9672dc7f95f9939b97a745a479ddbe5592be8")})},y=(a(63),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={prevSpans:0,spans:0},e.imageRef=r.a.createRef(),e.setSpans=e.setSpans.bind(Object(b.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans)}},{key:"componentWillUnmount",value:function(){this.imageRef.current.removeEventListener("load",this.setSpans)}},{key:"render",value:function(){var e=this.props.image,t=this.state.spans;return r.a.createElement("div",{className:"grid-item",style:{gridRowEnd:"span ".concat(t)}},r.a.createElement("img",{src:e.urls.regular,alt:"",ref:this.imageRef}))}},{key:"setSpans",value:function(){var e=this.imageRef.current.clientHeight,t=Math.floor(e/50);console.log(t),this.setState({spans:t})}}]),t}(r.a.PureComponent)),w={dark:!1,toggleTheme:function(){}},S=r.a.createContext(w),x=(a(64),function(e){var t=e.images,a=void 0===t?[]:t;return r.a.createElement(S.Consumer,null,(function(e){var t=e.darkTheme;return r.a.createElement("div",{className:t?"grid dark":"grid"},a.map((function(e){return r.a.createElement(y,{key:e.id,image:e})})))}))});function C(){return(C=Object(g.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(t);case 3:if((n=e.sent).data.length){e.next=6;break}return e.abrupt("return",a.setState({hasMore:!1}));case 6:r=a.state.images.concat(n.data),a.setImages(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),j.b.info("No more photos on main page:)");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var N=f(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x,{images:this.props.images}))}}]),t}(n.Component),(function(e,t){return C.apply(this,arguments)})),T=(a(65),a(14)),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).onChange=function(e){var t=e.currentTarget.value;a.setState({searchValue:t})},a.state={isFocus:!1,searchValue:""},a.submitForm=a.submitForm.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"submitForm",value:function(e){e.preventDefault(),this.state.searchValue&&this.props.history.push("/search/".concat(this.state.searchValue))}},{key:"render",value:function(){return r.a.createElement("form",{className:"search-form",onSubmit:this.submitForm},r.a.createElement("button",{className:"search-form__button"},"S"),r.a.createElement("input",{onChange:this.onChange,value:this.state.searchValue,type:"text",placeholder:"Search...",className:"search-form__input"}))}}]),t}(n.Component),D=Object(T.g)(_),I=a(16),F=(a(69),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).getClass=function(){return a.context.darkTheme?"theme-toggle-button dark":"theme-toggle-button"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=this.context.darkTheme,a=this.context.toggleTheme;return r.a.createElement("div",{className:"theme-switch-wrapper"},r.a.createElement("label",{className:"theme-switch",htmlFor:"checkbox"},r.a.createElement("input",Object.assign({},e,{className:"".concat(this.getClass()),type:"checkbox",id:"checkbox",checked:t,onChange:a})),r.a.createElement("div",{className:"slider round"})))}}]),t}(r.a.Component));F.contextType=S;var P=F,R=(a(70),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={},a.getClass=function(){return a.context.darkTheme?"nav dark":"nav"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.onSearch;return r.a.createElement("nav",{className:"".concat(this.getClass())},r.a.createElement("div",{className:"nav__content"},r.a.createElement("div",{className:"nav__search-form"},r.a.createElement(D,{onSearch:e})),r.a.createElement("ul",{className:"nav__links"},r.a.createElement("li",{className:"nav__links-link"},r.a.createElement(I.b,{exact:!0,to:"/"},"Home")),r.a.createElement("li",{className:"nav__links-link"},r.a.createElement(I.b,{to:"/about"},"About"))),r.a.createElement(P,null)))}}]),t}(n.Component));R.contextType=S;var q=f(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{images:this.props.images}))}}]),t}(n.Component),function(){var e=Object(g.a)(p.a.mark((function e(t,a,n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(n,t);case 3:if((r=e.sent).data.results.length){e.next=6;break}return e.abrupt("return",a.setState({hasMore:!1}));case 6:c=a.state.images.concat(r.data.results),a.setImages(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}()),M=(a(71),a(72),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).toggleTheme=function(){a.setState((function(e){return{darkTheme:!e.darkTheme}}))},a.state={darkTheme:w.dark,toggleTheme:a.toggleTheme},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(S.Provider,{value:this.state},r.a.createElement("div",{className:this.state.darkTheme?"app dark":"app"},r.a.createElement(j.a,null),r.a.createElement(I.a,null,r.a.createElement(R,null),r.a.createElement(T.d,null,r.a.createElement(T.b,{exact:!0,path:"/",component:N}),r.a.createElement(T.b,{path:"/search/:queryString",component:q}),r.a.createElement(T.b,{path:"/about",component:function(){return r.a.createElement("h2",null,"About page")}}),r.a.createElement(T.b,{path:"/404",component:function(){return r.a.createElement("h1",null,"Not found")}}),r.a.createElement(T.a,{to:"/404"})))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.01258369.chunk.js.map