(this.webpackJsonpunspash=this.webpackJsonpunspash||[]).push([[0],{35:function(e,t,a){e.exports=a(69)},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),s=a.n(c),o=(a(40),a(2)),i=a(3),u=a(5),l=a(4),m=a(6),h=(a(41),a(42),a(11)),p=(a(43),a(12)),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).onChange=function(e){var t=e.currentTarget.value;a.setState({searchValue:t})},a.state={isFocus:!1,searchValue:""},a.submitForm=a.submitForm.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"submitForm",value:function(e){e.preventDefault(),this.state.searchValue&&this.props.history.push("/search/".concat(this.state.searchValue))}},{key:"render",value:function(){return r.a.createElement("form",{className:"search-form",onSubmit:this.submitForm},r.a.createElement("button",{className:"search-form__button"},"S"),r.a.createElement("input",{onChange:this.onChange,value:this.state.searchValue,type:"text",placeholder:"Search...",className:"search-form__input"}))}}]),t}(n.Component),b=Object(p.g)(f),g=a(14),d=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.onSearch;return r.a.createElement("nav",{className:"nav"},r.a.createElement("div",{className:"nav__content"},r.a.createElement("div",{className:"nav__search-form"},r.a.createElement(b,{onSearch:e})),r.a.createElement("ul",{className:"nav__links"},r.a.createElement("li",{className:"nav__links-link"},r.a.createElement(g.b,{exact:!0,to:"/"},"Home")),r.a.createElement("li",{className:"nav__links-link"},r.a.createElement(g.b,{to:"/about"},"About")))))}}]),t}(n.Component),v=a(15),j=a.n(v),O=a(17);function E(e,t){return function(a){function n(e){var a;return Object(o.a)(this,n),(a=Object(u.a)(this,Object(l.a)(n).call(this,e))).populate=function(){console.log("Scrolling"),document.documentElement.getBoundingClientRect().bottom<document.documentElement.clientHeight+1&&(a.setState({fething:!0}),a.nextImages())},a.nextImages=function(){a.state.hasMore&&(console.log("New images incoming"),a.setState((function(e){var t=Object.assign(e);return t.currentPage++,t}),(function(){a.getData(a.state.currentPage,Object(h.a)(a),a.props.match.params.queryString)})))},a.getData=t,a.populate=a.populate.bind(Object(h.a)(a)),a.state={images:[],currentPage:1,hasMore:!0},a}return Object(m.a)(n,a),Object(i.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.match.params.queryString!==this.props.match.params.queryString&&(this.setImages([]),console.log("Fetching images"),this.getData(this.state.currentPage,this,this.props.match.params.queryString))}},{key:"setImages",value:function(e){this.setState({images:e})}},{key:"componentDidMount",value:function(){this.getData(this.state.currentPage,this,this.props.match.params.queryString),window.addEventListener("scroll",this.populate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.populate)}},{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{images:this.state.images}))}}]),n}(r.a.Component)}var y=a(21),k=a.n(y);k.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||console.log("Logging the error",e),Promise.reject(e)}));var S=function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k.a.get(e,{headers:t})}}]),e}(),w=function(e){return(new S).get("https://api.unsplash.com/photos?page=".concat(e),{Authorization:"Client-ID ".concat("1daed900b99463debb658164eea9672dc7f95f9939b97a745a479ddbe5592be8")})},C=function(e,t){return(new S).get("https://api.unsplash.com/search/photos?page=".concat(t,"&query=").concat(e.toLowerCase()),{Authorization:"Client-ID ".concat("1daed900b99463debb658164eea9672dc7f95f9939b97a745a479ddbe5592be8")})},_=(a(67),a(68),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={prevSpans:0,spans:0},e.imageRef=r.a.createRef(),e.setSpans=e.setSpans.bind(Object(h.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans)}},{key:"componentWillUnmount",value:function(){this.imageRef.current.removeEventListener("load",this.setSpans)}},{key:"render",value:function(){var e=this.props.image,t=this.state.spans;return r.a.createElement("div",{className:"grid-item",style:{gridRowEnd:"span ".concat(t)}},r.a.createElement("img",{src:e.urls.regular,alt:"",ref:this.imageRef}))}},{key:"setSpans",value:function(){var e=this.imageRef.current.clientHeight,t=Math.floor(e/50);console.log(t),this.setState({spans:t})}}]),t}(r.a.PureComponent)),x=function(e){var t=e.images,a=void 0===t?[]:t;return r.a.createElement("div",{className:"grid"},a.map((function(e){return r.a.createElement(_,{key:e.id,image:e})})))};function N(){return(N=Object(O.a)(j.a.mark((function e(t,a){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:if((n=e.sent).data.length){e.next=5;break}return e.abrupt("return",a.setState({hasMore:!1}));case 5:r=a.state.images.concat(n.data),a.setImages(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=E(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x,{images:this.props.images}))}}]),t}(n.Component),(function(e,t){return N.apply(this,arguments)})),I=E(function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{images:this.props.images}))}}]),t}(n.Component),function(){var e=Object(O.a)(j.a.mark((function e(t,a,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(n,t);case 3:if((r=e.sent).data.results.length){e.next=6;break}return e.abrupt("return",a.setState({hasMore:!1}));case 6:c=a.state.images.concat(r.data.results),a.setImages(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}()),R=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(d,{onSearch:this.searchHandler}),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:D}),r.a.createElement(p.b,{path:"/search/:queryString",component:I}),r.a.createElement(p.b,{path:"/about",component:function(){return r.a.createElement("h2",null,"About page")}}),r.a.createElement(p.b,{path:"/404",component:function(){return r.a.createElement("h1",null,"Not found")}}),r.a.createElement(p.a,{to:"/404"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.8936cccf.chunk.js.map